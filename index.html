<!DOCTYPE html>
<html>

<head>
<meta name="viewport" content="width=device-width">
		  	<title>Attendance Monitoring System - Login Form</title>
			
			<link rel='stylesheet' href='register.css' type='text/css'/> 
			<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" />
    		<link rel="stylesheet" href="bootstrap-3.3.4/css/bootstrap.min.css" media="screen" type="text/css" />
     		<script src="bootstrap-3.3.4/js/bootstrap.min.js"></script>
    		<script src="register.js">
    		<script src="bootbox.min.js">
    			<script src="bootbox.js">
    		<script src="http://code.jquery.com/jquery-1.11.2.min.js"></script>
    		<script src="jquery-1.11.2.js"></script>
    		<script type="text/javascript" src="phonegap.js"></script>
    		<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.5.2/jquery.min.js"></script>
			<script src="http://cdnjs.cloudflare.com/ajax/libs/modernizr/2.8.2/modernizr.js"></script>


    		
    		
    		
    		
    		<script>
    		
    
    
      document.addEventListener("deviceready", onDeviceReady, false);

    // Cordova is loaded and it is now safe to make calls Cordova methods
    //
    function onDeviceReady() {
    
    
    
 $(".se-pre-con").fadeOut("slow");;
        var element = document.getElementById('deviceProperties');

       var device_uuid = device.uuid;
       
       
 
    var networkState = navigator.connection.type;
    if (networkState == Connection.NONE)
    {
     
        
document.getElementById("bootstrap").innerHTML = "<div class='alert alert-danger' role='alert'>Please Check Internet Connection Settings</div>";
     
                window.location='first_screen.html';
                return true;
    }
    else
{
    

    
    
    
    
    	is_device_registered(device_uuid);
 function is_device_registered(device_uuid)
{

 
function foo() {


cordova.plugins.diagnostic.isLocationEnabled(function(enabled){

//alert('result='+enabled);	
//alert("Location is " + (enabled ? "enabled" : "disabled"));
if(enabled==0)
	{
	alert('Location is disabled. Please enable GPS.');
	bootbox.confirm("Location is disabled. Please enable GPS.", function(result) {
  Example.show("Confirm result: "+result);
}); 
	 cordova.plugins.diagnostic.switchToLocationSettings();
	
	}else
	{
	
	
$.post( "http://183.82.96.212:8080/my_drupal_site/?q=my_services/m_resources/is_device_registered" , { device_uuid:device_uuid}, function( data ) {
	 
	 
  if(data>=1)
      {
         
     window.location='log-in.html';
      return false;
      }
      else
      {
          
           window.location='registration.html';
             return false;
      }
}, "json");
}
    //console.log("Location is " + (enabled ? "enabled" : "disabled"));
}, function(error){
//alert('!!!!!!!!go to settings');
    console.error("The following error occurred: "+error);
});

    setTimeout(foo, 2000);
}

foo();


  return false;

}
    
    	

	}
			
			}
			
			
			function onSuccess(position) {
alert(" GPS ON");
}

// onError Callback receives a PositionError object
//
function onError(error) {
alert(" GPS OFF");

}
        </script>
</head>

<body onload="onDeviceReady()">
<div class="container">
  
  <div class="row" id="pwd-container">
    <div class="col-md-4"></div>
   
    <div class="col-md-4">
      <section class="login-form">
        <span id="bootstrap"></span>
        <form method="post" action="log-in.html" onsubmit="return formValidation();" role="login">
          <img src="homecare_logo.png" class="img-responsive" alt="" style="HEIGHT:62PX;"/>
          <img src="In turn zooming.gif" class="img-responsive" alt="" style="HEIGHT:45PX;"/>
         
          
</body>

</html>
